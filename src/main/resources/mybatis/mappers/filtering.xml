<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.tt.Host.ListingsDao">
	<select id="getLodgingsByFiltering" parameterType="com.tt.Host.FilteringVO" resultType="com.tt.Lodging.LodgingVO">
		select
			B.amenity_code code,
			C.lodging_no no,
			C.lodging_name name,
			C.lodging_status status,
			C.lodging_location location,
			C.lodging_imm_approval immApproval,
			C.lodging_bedroom bedroom,
			C.lodging_singlebed singlebed,
			C.lodging_doublebed doublebed,
			C.lodging_bathroom bathroom,
			C.lodging_review_count reviewCount
		from 
			Thxtay_user A, Thxtay_amenitylist B, Thxtay_lodging C, Thxtay_filtering F
		where B.lodging_no = C.lodging_no
        and A.user_no = #{userNo}
        and F.bedroom = #{bedroom}
        and F.kitchen = #{kitchen}
        and F.bathroom = #{bathroom}
        and F.singlebed = #{singlebed}
        and F.doublebed = #{doublebed}
        and F.ac = #{ac}
        and F.heater = #{heater}
        and F.drier = #{drier}
        and F.washer = #{washer}
        and F.wifi = #{wifi}
        and F.parkingLot = #{parkingLot}
        and F.gym = #{gym}
        and F.pool = #{pool}
        and F.terrace = #{terrace}
        and F.garden = #{garden}
        and F.nearLake = #{nearLake}
        and F.nearBeach = #{nearBeach}
        and F.isRegistering = #{isRegistering}
        and F.standby = #{standby}
        and F.isApproved = #{isApproved}
        and F.isStopped = #{isStopped}
       <!-- <if test='bedroom != "0"'>
        	and bedroom like #{bedroom}
        </if>
        <if test='bathroom != "0"'>
        	and bathroom like #{bathroom}
        </if>
        <if test='singlebed != "0"'>
        	and singlebed like #{singlebed}
        </if>
        <if test='doublebed != "0"'>
        	and doublebed like #{doublebed}
        </if>
        <if test='kitchen != "0"'>
        	and kitchen like #{kitchen}
        </if>
        <if test='ac != "0"'>
        	and ac like #{ac}
        </if>
        <if test='heater != "0"'>
        	and heater like #{heater}
        </if>
        <if test='washer != "0"'>
        	and washer like #{washer}
        </if>
        <if test='drier != "0"'>
        	and drier like #{drier}
        </if>
        <if test='parkingLot != "0"'>
        	and parkingLot like #{parkingLot}
        </if>
        <if test='gym != "0"'>
        	and gym like #{gym}
        </if>
        <if test='pool != "0"'>
        	and pool like #{pool}
        </if>
        <if test='terrace != "0"'>
        	and terrace like #{terrace}
        </if>
        <if test='garden != "0"'>
        	and garden like #{garden}
        </if>
        <if test='nearLake != "0"'>
        	and nearLake like #{nearLake}
        </if>
        <if test='nearBeach != "0"'>
        	and nearBeach like #{nearBeach}
        </if>
        <if test='isRegistering != null'>
        	and isRegistering like #{isRegistering}
        </if>
        <if test='standby != null'>
        	and standby like #{standby}
        </if>
        <if test='isApproved != null'>
        	and isApproved like #{isApproved}
        </if>
        <if test='isStopped != null'>
        	and isStopped like #{isStopped}
        </if>
         --> 
	</select>
</mapper>