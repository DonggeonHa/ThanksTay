<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tt.Lodging.BookingDao">
	
	<select id="getLodgingByLodgingNo" parameterType="int" resultType="com.tt.Lodging.LodgingVO">
		SELECT
			lodging_no							no                
			,user_no					        userNo            
			,lodging_city				        city          
			,lodging_post_no                    postNo
			,lodging_address                    address        
			,lodging_address_rest               addressRest    
			,lodging_description                description	
			,lodging_imm_approval               immApproval		
			,lodging_max_guest                  maxGuest
			,lodging_image                      image   
			,lodging_name                       name          
			,lodging_bedroom                    bedroom          
			,lodging_bathroom                   bathroom           
			,lodging_singlebed                  singlebed          
			,lodging_doublebed                  doublebed        
			,lodging_view_count                 viewcount         
			,lodging_review_count               reviewCount         
			,lodging_review_average             reviewAverage       
			,lodging_cleanness                  cleanness      
			,lodging_communication              communication
			,lodging_check_in                   checkIn     
			,lodging_accuracy                   accuracy  
			,lodging_location                   location       
			,lodging_value                      value       
			,lodging_status                     status       
			,lodging_type_code                  lodgingTypeCode         
			,lodging_lat                        latitude 
			,lodging_lng                        longitude
		FROM                            
			thxtay_lodging
		WHERE
			lodging_no=#{value}
	</select>
	
	<select id="getPricesByLodgingNo" parameterType="int" resultType="com.tt.vo.PriceVO">
		SELECT
			price_no				no,
			lodging_no			    lodgingNo,
			price_lodging_fee		lodgingFee,
			price_cleaning_fee		cleaninFee,
			price_open_date			openDate,
			price_isbooked			isBooked,
			price_updated_date		updateDate,
			price_created_date		createdDate
		FROM
			thxtay_price
		WHERE
			price_open_date > sysdate
            and price_isbooked = 'N'
            and lodging_no = #{value}
	</select>
	
	<select id="getLodgingImgByLodgingNo" parameterType="int" resultType="com.tt.Lodging.LodgingImgVO">
		SELECT
			lodgingimg_no		no,
			lodging_no			lodgingNo,
			lodgingimg_uri		uri
		FROM
			thxtay_lodging_img
		WHERE
			lodging_no = #{value}
		order by lodgingimg_no asc
	</select>
	
	<select id="getAmenitiesByLodgingNo" parameterType="int" resultType="com.tt.vo.AmenityListDTO">
		SELECT
			A.amenity_code		    code,
			A.lodging_no			lodgingNo,
			C.codecontent			codeContent,
			C.parentcode			parentCode
		FROM
			thxtay_amenitylist A, thxtay_common_code C
		WHERE
            A.lodging_no = #{value}
            and A.amenity_code = C.commoncode
	</select>
	
	
	
</mapper>